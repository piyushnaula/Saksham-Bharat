<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Focus Challenge Game</title>
  <style>
    body {
      font-family: Arial, Verdana, sans-serif;
      background: linear-gradient(135deg, #FFE5E5, #FFB3B3);
      margin: 0;
      padding: 0;
    }
    .app-container {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 32px #0001;
      padding: 24px;
      min-height: 92vh;
    }
    .app-header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
    .back-button { font-size: 1.1rem; cursor: pointer; background: #FFE5E5; border-radius: 10px; border:none; padding: 8px 18px;}
    .game-title { font-size: 2rem; font-weight: bold; flex:1; text-align: center; color: #FF6B6B;}
    .score-display { font-size: 1rem; color: #444;}
    .instruction { padding: 12px 0; font-size: 1.2rem; text-align: center; color: #FF6B6B; margin-bottom: 20px;}
    .game-area {
      background: white;
      border: 3px solid #FF6B6B;
      border-radius: 20px;
      padding: 40px;
      margin: 20px 0;
      min-height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    .target-circle {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #FF6B6B, #FF8E53);
      border-radius: 50%;
      cursor: pointer;
      position: absolute;
      animation: bounce 2s infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      color: white;
      font-weight: bold;
      transition: all 0.3s;
    }
    .target-circle:hover {
      transform: scale(1.1);
    }
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }
    .distractor {
      width: 60px;
      height: 60px;
      background: #ccc;
      border-radius: 50%;
      position: absolute;
      cursor: pointer;
    }
    .timer {
      text-align: center;
      font-size: 1.5rem;
      margin: 20px 0;
      color: #FF6B6B;
      font-weight: bold;
    }
    .feedback { text-align: center; font-size: 1.3rem; margin: 15px 0; font-weight: bold;}
    .feedback.success { color: #13bb2b; }
    .feedback.error { color: #ca2525; }
    .next-button { 
      background: #FF6B6B; 
      color: white; 
      border:none; 
      border-radius:22px; 
      font-size:1.15rem; 
      padding:11px 30px; 
      cursor:pointer; 
      display:block; 
      margin:20px auto; 
    }
    #final-score { text-align: center; font-size:1.4rem; margin: 30px 10px; color:#FF6B6B;}
    .level-indicator {
      text-align: center;
      font-size: 1rem;
      color: #666;
      margin: 10px 0;
    }
    .progress-bar {
      width: 100%;
      height: 20px;
      background: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, #FF6B6B, #FF8E53);
      width: 0%;
      transition: width 0.3s;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <button class="back-button" onclick="goHome()">‚Üê Back to Games</button>
      <h1 class="game-title">üéØ Focus Challenge</h1>
      <div class="score-display">Score: <span id="score">0</span></div>
    </header>

    <div class="instruction">Click only the RED circles! Ignore the gray ones!</div>
    <div class="level-indicator">Level <span id="level">1</span> - Round <span id="round">1</span> of 10</div>
    
    <div class="progress-bar">
      <div class="progress-fill" id="progress-fill"></div>
    </div>
    
    <div class="timer" id="timer">Time: 3s</div>
    
    <div class="game-area" id="game-area"></div>
    
    <div class="feedback" id="feedback"></div>
    <div id="final-score"></div>
    
    <button class="next-button" id="next-button" onclick="nextRound()" style="display: none;">
      Next Round ‚Üí
    </button>
  </div>

  <script>
    let currentLevel = 1;
    let currentRound = 1;
    let score = 0;
    let timeLeft = 3;
    let gameTimer = null;
    let roundTimer = null;
    const maxRounds = 10;

    function initializeGame() {
      currentLevel = 1;
      currentRound = 1;
      score = 0;
      updateDisplay();
      startRound();
    }

    function startRound() {
      if (currentRound > maxRounds) {
        showFinalScore();
        return;
      }

      clearTimers();
      timeLeft = Math.max(2, 4 - Math.floor(currentLevel / 3)); // Faster as level increases
      document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
      document.getElementById('feedback').textContent = '';
      document.getElementById('next-button').style.display = 'none';

      createTargets();
      startTimer();
    }

    function createTargets() {
      const gameArea = document.getElementById('game-area');
      gameArea.innerHTML = '';

      // Create target circles (1-2 red circles)
      const numTargets = Math.random() > 0.5 ? 1 : 2;
      for (let i = 0; i < numTargets; i++) {
        const target = document.createElement('div');
        target.className = 'target-circle';
        target.textContent = 'üéØ';
        target.style.left = Math.random() * 80 + '%';
        target.style.top = Math.random() * 70 + '%';
        target.onclick = () => hitTarget(target);
        gameArea.appendChild(target);
      }

      // Create distractors (gray circles)
      const numDistractors = Math.min(currentLevel, 6);
      for (let i = 0; i < numDistractors; i++) {
        const distractor = document.createElement('div');
        distractor.className = 'distractor';
        distractor.style.left = Math.random() * 80 + '%';
        distractor.style.top = Math.random() * 70 + '%';
        distractor.onclick = () => hitDistractor();
        gameArea.appendChild(distractor);
      }
    }

    function startTimer() {
      roundTimer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
        
        if (timeLeft <= 0) {
          clearTimers();
          timeUp();
        }
      }, 1000);
    }

    function hitTarget(target) {
      target.style.background = '#4CAF50';
      target.textContent = '‚úÖ';
      score += 15;
      updateDisplay();
      
      const feedback = document.getElementById('feedback');
      feedback.textContent = 'üéâ Great focus! Well done! üéâ';
      feedback.className = 'feedback success';
      say('Great focus!');
      
      clearTimers();
      setTimeout(() => {
        document.getElementById('next-button').style.display = 'block';
      }, 1000);
    }

    function hitDistractor() {
      score = Math.max(0, score - 10);
      updateDisplay();
      
      const feedback = document.getElementById('feedback');
      feedback.textContent = '‚ùå Oops! Focus on RED circles only! ‚ùå';
      feedback.className = 'feedback error';
      say('Focus on red circles only!');
    }

    function timeUp() {
      const feedback = document.getElementById('feedback');
      feedback.textContent = '‚è∞ Time up! Try to be faster next time! ‚è∞';
      feedback.className = 'feedback error';
      say('Time up! Try to be faster!');
      
      setTimeout(() => {
        document.getElementById('next-button').style.display = 'block';
      }, 1500);
    }

    function nextRound() {
      currentRound++;
      if (currentRound > maxRounds / 2 && currentLevel === 1) {
        currentLevel = 2;
      } else if (currentRound > (maxRounds * 0.8) && currentLevel === 2) {
        currentLevel = 3;
      }
      
      updateDisplay();
      startRound();
    }

    function updateDisplay() {
      document.getElementById('score').textContent = score;
      document.getElementById('level').textContent = currentLevel;
      document.getElementById('round').textContent = currentRound;
      
      const progress = (currentRound - 1) / maxRounds * 100;
      document.getElementById('progress-fill').style.width = progress + '%';
    }

    function showFinalScore() {
      document.getElementById('game-area').innerHTML = '';
      document.getElementById('timer').textContent = '';
      document.getElementById('next-button').style.display = 'none';
      document.getElementById('feedback').textContent = '';
      
      const finalScore = document.getElementById('final-score');
      let message = '';
      if (score >= 120) {
        message = 'üåü Amazing Focus Master! üåü';
      } else if (score >= 80) {
        message = 'üéØ Great Concentration! üéØ';
      } else {
        message = 'üëç Good Effort! Keep Practicing! üëç';
      }
      
      finalScore.textContent = `${message} Final Score: ${score}`;
      say('Game complete! ' + message);
    }

    function clearTimers() {
      if (roundTimer) clearInterval(roundTimer);
    }

    function say(text) {
      if ('speechSynthesis' in window) {
        const synth = window.speechSynthesis;
        synth.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        utter.rate = 0.8;
        synth.speak(utter);
      }
    }

    function goHome() {
      window.location.href = 'adhd-index.html';
    }

    window.onload = initializeGame;
  </script>
</body>
</html>

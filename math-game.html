<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Math Game - Count Objects</title>
  <style>
    body {
      font-family: Arial, Verdana, sans-serif;
      background: #f8faff;
      margin: 0;
      padding: 0;
    }
    .app-container {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 32px #0001;
      padding: 24px;
      min-height: 92vh;
    }
    .app-header { display: flex; align-items: center; gap: 10px; }
    .back-button { font-size: 1.1rem; cursor: pointer; background: #e3e8ee; border-radius: 10px; border:none; padding: 8px 18px;}
    .game-title { font-size: 2rem; font-weight: bold; flex:1; text-align: center;}
    .score-display { font-size: 1rem; color: #444;}
    .instruction { padding: 12px 0; font-size: 1.2rem; text-align: center; color: #268;}
    .question { text-align: center; font-size: 1.5rem; margin: 20px 0; font-weight: bold; color: #333; }
    .objects-container {
      background: linear-gradient(135deg, #E3F2FD, #ffffff);
      border: 3px solid #2196F3;
      border-radius: 20px;
      padding: 30px;
      margin: 20px 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      min-height: 120px;
      align-items: center;
    }
    .object-emoji {
      font-size: 2.5rem;
      padding: 8px;
      background: rgba(255,255,255,0.8);
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      animation: bounceIn 0.5s ease-out;
    }
    @keyframes bounceIn {
      0% { transform: scale(0); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    .answer-options {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }
    .number-button {
      background: linear-gradient(135deg, #FF9800, #F57C00);
      color: white;
      border: none;
      padding: 20px 25px;
      border-radius: 20px;
      font-size: 2rem;
      cursor: pointer;
      transition: all 0.3s;
      min-width: 70px;
      min-height: 70px;
      font-weight: bold;
    }
    .number-button:hover:not(:disabled) {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .number-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .feedback { text-align: center; font-size: 1.3rem; margin: 15px 0; font-weight: bold;}
    .feedback.success { color: #13bb2b; }
    .feedback.error { color: #ca2525; }
    .next-button { 
      background: #2684ff; 
      color: white; 
      border:none; 
      border-radius:22px; 
      font-size:1.15rem; 
      padding:11px 30px; 
      cursor:pointer; 
      display:block; 
      margin:20px auto; 
    }
    #final-score { text-align: center; font-size:1.4rem; margin: 30px 10px; color:#25ac1b;}
    .level-indicator {
      text-align: center;
      font-size: 1rem;
      color: #666;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <button class="back-button" onclick="goHome()">‚Üê Back to Games</button>
      <h1 class="game-title">üî¢ Math Game</h1>
      <div class="score-display">Score: <span id="score">0</span></div>
    </header>

    <div class="instruction">Count the objects and click the correct number!</div>
    <div class="level-indicator">Question <span id="question-number">1</span> of 10</div>
    
    <div class="question" id="question-text">How many üçé do you see?</div>
    
    <div class="objects-container" id="objects-container"></div>
    
    <div class="answer-options" id="answer-options"></div>
    
    <div class="feedback" id="feedback"></div>
    <div id="final-score"></div>
    
    <button class="next-button" id="next-button" onclick="nextQuestion()" style="display: none;">
      Next Question ‚Üí
    </button>
  </div>

  <script>
    const objects = [
      {emoji: 'üçé', name: 'apples'},
      {emoji: '‚≠ê', name: 'stars'},
      {emoji: 'üê∂', name: 'dogs'},
      {emoji: 'üê±', name: 'cats'},
      {emoji: '‚öΩ', name: 'balls'},
      {emoji: 'üéà', name: 'balloons'},
      {emoji: 'üå∏', name: 'flowers'},
      {emoji: 'ü¶ã', name: 'butterflies'},
      {emoji: 'üê∏', name: 'frogs'},
      {emoji: 'üçì', name: 'strawberries'}
    ];

    let currentQuestion = 1;
    let score = 0;
    let correctAnswer = 0;
    let currentObject = null;
    const totalQuestions = 10;

    function initializeGame() {
      currentQuestion = 1;
      score = 0;
      document.getElementById('score').textContent = score;
      document.getElementById('final-score').textContent = '';
      generateQuestion();
    }

    function generateQuestion() {
      if (currentQuestion > totalQuestions) {
        showFinalScore();
        return;
      }

      // Choose random object and count (1-8 for easier counting)
      currentObject = objects[Math.floor(Math.random() * objects.length)];
      correctAnswer = Math.floor(Math.random() * 8) + 1; // 1 to 8 objects
      
      // Update question text
      document.getElementById('question-text').textContent = 
        `How many ${currentObject.emoji} do you see?`;
      document.getElementById('question-number').textContent = currentQuestion;
      
      // Create objects
      createObjects();
      
      // Create answer options
      createAnswerOptions();
      
      // Clear feedback and hide next button
      document.getElementById('feedback').textContent = '';
      document.getElementById('next-button').style.display = 'none';
      
      // Speak the question
      setTimeout(() => {
        say(`How many ${currentObject.name} do you see?`);
      }, 500);
    }

    function createObjects() {
      const container = document.getElementById('objects-container');
      container.innerHTML = '';
      
      for (let i = 0; i < correctAnswer; i++) {
        setTimeout(() => {
          const obj = document.createElement('span');
          obj.className = 'object-emoji';
          obj.textContent = currentObject.emoji;
          container.appendChild(obj);
        }, i * 200); // Staggered animation
      }
    }

    function createAnswerOptions() {
      const container = document.getElementById('answer-options');
      container.innerHTML = '';
      
      // Create 3 options: correct answer + 2 wrong answers
      const options = [correctAnswer];
      
      // Add wrong answers
      while (options.length < 3) {
        let wrongAnswer = Math.floor(Math.random() * 8) + 1;
        if (!options.includes(wrongAnswer)) {
          options.push(wrongAnswer);
        }
      }
      
      // Shuffle options
      options.sort(() => Math.random() - 0.5);
      
      // Create buttons
      options.forEach(number => {
        const button = document.createElement('button');
        button.className = 'number-button';
        button.textContent = number;
        button.onclick = () => selectAnswer(number);
        container.appendChild(button);
      });
    }

    function selectAnswer(selectedNumber) {
      const buttons = document.querySelectorAll('.number-button');
      const feedback = document.getElementById('feedback');
      
      // Disable all buttons
      buttons.forEach(btn => btn.disabled = true);
      
      if (selectedNumber === correctAnswer) {
        // Correct answer
        feedback.textContent = 'üéâ Excellent! Well done! üéâ';
        feedback.className = 'feedback success';
        score += 15;
        say('Excellent! Well done!');
        
        // Highlight correct button
        buttons.forEach(btn => {
          if (parseInt(btn.textContent) === correctAnswer) {
            btn.style.background = '#4CAF50';
          }
        });
        
        setTimeout(() => {
          document.getElementById('next-button').style.display = 'block';
        }, 1500);
        
      } else {
        // Wrong answer
        feedback.textContent = `‚ùå Not quite! The correct answer is ${correctAnswer}. Try the next one! ‚ùå`;
        feedback.className = 'feedback error';
        score = Math.max(0, score - 5);
        say(`Not quite! The correct answer is ${correctAnswer}`);
        
        // Highlight wrong and correct buttons
        buttons.forEach(btn => {
          if (parseInt(btn.textContent) === selectedNumber) {
            btn.style.background = '#f44336';
          } else if (parseInt(btn.textContent) === correctAnswer) {
            btn.style.background = '#4CAF50';
          }
        });
        
        setTimeout(() => {
          document.getElementById('next-button').style.display = 'block';
        }, 2500);
      }
      
      document.getElementById('score').textContent = score;
    }

    function nextQuestion() {
      currentQuestion++;
      generateQuestion();
    }

    function showFinalScore() {
      document.getElementById('objects-container').innerHTML = '';
      document.getElementById('answer-options').innerHTML = '';
      document.getElementById('question-text').textContent = '';
      document.getElementById('next-button').style.display = 'none';
      document.getElementById('feedback').textContent = '';
      
      const finalScore = document.getElementById('final-score');
      finalScore.textContent = `üéä Game Complete! Your Final Score: ${score} out of ${totalQuestions * 15} üéä`;
      
      say(`Game complete! Your final score is ${score}`);
    }

    function say(text) {
      if ('speechSynthesis' in window) {
        const synth = window.speechSynthesis;
        synth.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        utter.rate = 0.7;
        synth.speak(utter);
      }
    }

    function goHome() {
      window.location.href = 'index.html';
    }

    window.onload = initializeGame;
  </script>
</body>
</html>

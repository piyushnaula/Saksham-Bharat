<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simon Says Plus Game</title>
  <style>
    body {
      font-family: Arial, Verdana, sans-serif;
      background: linear-gradient(135deg, #E5F9F6, #B3E5D1);
      margin: 0;
      padding: 0;
    }
    .app-container {
      max-width: 700px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 8px 32px #0001;
      padding: 24px;
      min-height: 92vh;
    }
    .app-header { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
    .back-button { font-size: 1.1rem; cursor: pointer; background: #E5F9F6; border-radius: 10px; border:none; padding: 8px 18px;}
    .game-title { font-size: 2rem; font-weight: bold; flex:1; text-align: center; color: #4ECDC4;}
    .score-display { font-size: 1rem; color: #444;}
    .instruction { padding: 12px 0; font-size: 1.2rem; text-align: center; color: #4ECDC4; margin-bottom: 20px;}
    .simon-says-indicator {
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      margin: 20px 0;
      padding: 15px;
      border-radius: 15px;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .simon-says-true {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
    }
    .simon-says-false {
      background: linear-gradient(135deg, #f44336, #d32f2f);
      color: white;
    }
    .action-display {
      text-align: center;
      font-size: 2.5rem;
      margin: 30px 0;
      padding: 20px;
      background: #f0f8ff;
      border-radius: 15px;
      min-height: 80px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid #4ECDC4;
    }
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 30px 0;
      flex-wrap: wrap;
    }
    .action-button {
      background: linear-gradient(135deg, #4ECDC4, #44B3A5);
      color: white;
      border: none;
      padding: 20px 30px;
      border-radius: 20px;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
      min-width: 120px;
    }
    .action-button:hover:not(:disabled) {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .action-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    .feedback { text-align: center; font-size: 1.3rem; margin: 15px 0; font-weight: bold;}
    .feedback.success { color: #13bb2b; }
    .feedback.error { color: #ca2525; }
    .next-button { 
      background: #4ECDC4; 
      color: white; 
      border:none; 
      border-radius:22px; 
      font-size:1.15rem; 
      padding:11px 30px; 
      cursor:pointer; 
      display:block; 
      margin:20px auto; 
    }
    #final-score { text-align: center; font-size:1.4rem; margin: 30px 10px; color:#4ECDC4;}
    .round-indicator {
      text-align: center;
      font-size: 1rem;
      color: #666;
      margin: 10px 0;
    }
    .timer {
      text-align: center;
      font-size: 1.2rem;
      color: #4ECDC4;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <button class="back-button" onclick="goHome()">‚Üê Back to Games</button>
      <h1 class="game-title">ü§ñ Simon Says Plus</h1>
      <div class="score-display">Score: <span id="score">0</span></div>
    </header>

    <div class="instruction">Only do the action if "Simon Says" is shown!</div>
    <div class="round-indicator">Round <span id="round">1</span> of 12</div>
    <div class="timer" id="timer">Get Ready...</div>
    
    <div class="simon-says-indicator" id="simon-indicator">
      Get Ready!
    </div>
    
    <div class="action-display" id="action-display">
      üëã Wave Your Hand
    </div>
    
    <div class="action-buttons" id="action-buttons">
      <button class="action-button" onclick="doAction()">‚úÖ Do It!</button>
      <button class="action-button" onclick="dontDoAction()">‚ùå Don't Do It!</button>
    </div>
    
    <div class="feedback" id="feedback"></div>
    <div id="final-score"></div>
    
    <button class="next-button" id="next-button" onclick="nextRound()" style="display: none;">
      Next Round ‚Üí
    </button>
  </div>

  <script>
    const actions = [
      {emoji: 'üëã', text: 'Wave Your Hand'},
      {emoji: 'üëè', text: 'Clap Your Hands'},
      {emoji: 'ü§ö', text: 'Raise Your Hand'},
      {emoji: 'üëÜ', text: 'Point Up'},
      {emoji: 'üëç', text: 'Thumbs Up'},
      {emoji: '‚úä', text: 'Make a Fist'},
      {emoji: 'ü§≤', text: 'Put Hands Together'},
      {emoji: 'üôå', text: 'Raise Both Hands'},
      {emoji: 'üëê', text: 'Spread Your Arms'},
      {emoji: 'ü§ò', text: 'Peace Sign'}
    ];

    let currentRound = 1;
    let score = 0;
    let currentAction = null;
    let simonSays = true;
    let timeLeft = 5;
    let roundTimer = null;
    const maxRounds = 12;

    function initializeGame() {
      currentRound = 1;
      score = 0;
      updateDisplay();
      startRound();
    }

    function startRound() {
      if (currentRound > maxRounds) {
        showFinalScore();
        return;
      }

      clearTimer();
      timeLeft = 5;
      simonSays = Math.random() > 0.3; // 70% chance Simon says it
      currentAction = actions[Math.floor(Math.random() * actions.length)];
      
      displayAction();
      enableButtons(true);
      document.getElementById('feedback').textContent = '';
      document.getElementById('next-button').style.display = 'none';
      
      startTimer();
    }

    function displayAction() {
      const simonIndicator = document.getElementById('simon-indicator');
      const actionDisplay = document.getElementById('action-display');
      
      if (simonSays) {
        simonIndicator.textContent = '‚úÖ SIMON SAYS:';
        simonIndicator.className = 'simon-says-indicator simon-says-true';
        say('Simon says');
      } else {
        simonIndicator.textContent = '‚ùå (Just a command):';
        simonIndicator.className = 'simon-says-indicator simon-says-false';
      }
      
      actionDisplay.textContent = `${currentAction.emoji} ${currentAction.text}`;
      
      setTimeout(() => {
        say(currentAction.text);
      }, simonSays ? 800 : 200);
    }

    function startTimer() {
      document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
      
      roundTimer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
        
        if (timeLeft <= 0) {
          clearTimer();
          timeUp();
        }
      }, 1000);
    }

    function doAction() {
      clearTimer();
      enableButtons(false);
      
      const feedback = document.getElementById('feedback');
      
      if (simonSays) {
        // Correct - should do it when Simon says
        score += 15;
        feedback.textContent = 'üéâ Perfect! You followed Simon! üéâ';
        feedback.className = 'feedback success';
        say('Perfect! You followed Simon!');
      } else {
        // Wrong - shouldn't do it when Simon doesn't say
        score = Math.max(0, score - 10);
        feedback.textContent = '‚ùå Oops! Simon didn\'t say to do it! ‚ùå';
        feedback.className = 'feedback error';
        say('Oops! Simon didn\'t say to do it!');
      }
      
      updateDisplay();
      setTimeout(() => {
        document.getElementById('next-button').style.display = 'block';
      }, 2000);
    }

    function dontDoAction() {
      clearTimer();
      enableButtons(false);
      
      const feedback = document.getElementById('feedback');
      
      if (!simonSays) {
        // Correct - shouldn't do it when Simon doesn't say
        score += 15;
        feedback.textContent = 'üéØ Great listening! You waited for Simon! üéØ';
        feedback.className = 'feedback success';
        say('Great listening! You waited for Simon!');
      } else {
        // Wrong - should have done it when Simon says
        score = Math.max(0, score - 10);
        feedback.textContent = '‚ùå Oops! Simon said to do it! ‚ùå';
        feedback.className = 'feedback error';
        say('Oops! Simon said to do it!');
      }
      
      updateDisplay();
      setTimeout(() => {
        document.getElementById('next-button').style.display = 'block';
      }, 2000);
    }

    function timeUp() {
      enableButtons(false);
      
      const feedback = document.getElementById('feedback');
      feedback.textContent = '‚è∞ Time up! Make a choice faster next time! ‚è∞';
      feedback.className = 'feedback error';
      say('Time up! Make a choice faster!');
      
      setTimeout(() => {
        document.getElementById('next-button').style.display = 'block';
      }, 2000);
    }

    function enableButtons(enable) {
      const buttons = document.querySelectorAll('.action-button');
      buttons.forEach(btn => btn.disabled = !enable);
    }

    function nextRound() {
      currentRound++;
      updateDisplay();
      startRound();
    }

    function updateDisplay() {
      document.getElementById('score').textContent = score;
      document.getElementById('round').textContent = currentRound;
    }

    function showFinalScore() {
      document.getElementById('simon-indicator').textContent = '';
      document.getElementById('action-display').textContent = '';
      document.getElementById('action-buttons').innerHTML = '';
      document.getElementById('timer').textContent = '';
      document.getElementById('next-button').style.display = 'none';
      document.getElementById('feedback').textContent = '';
      
      const finalScore = document.getElementById('final-score');
      let message = '';
      if (score >= 140) {
        message = 'üåü Amazing Listener! üåü';
      } else if (score >= 100) {
        message = 'üéØ Great Focus! üéØ';
      } else {
        message = 'üëç Good Practice! Keep It Up! üëç';
      }
      
      finalScore.textContent = `${message} Final Score: ${score}`;
      say('Game complete! ' + message);
    }

    function clearTimer() {
      if (roundTimer) clearInterval(roundTimer);
    }

    function say(text) {
      if ('speechSynthesis' in window) {
        const synth = window.speechSynthesis;
        const utter = new SpeechSynthesisUtterance(text);
        utter.rate = 0.8;
        synth.speak(utter);
      }
    }

    function goHome() {
      window.location.href = 'adhd-index.html';
    }

    window.onload = initializeGame;
  </script>
</body>
</html>
